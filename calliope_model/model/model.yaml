import: # Import other files from paths relative to this file, or absolute paths
  - "techs_and_locs/techs2.yaml" # This file specifies the model's technologies
  - "techs_and_locs/locations.yaml" # This file specifies the model's nodes
  - "scenarios.yaml" # Scenario and override group definitions

# Model configuration: all settings that affect the built model
config:
  init:
    name: NL Power System dispatch example
    # What version of Calliope this model is intended for
    calliope_version: 0.7.0.dev7
    subset.timesteps: ["2024-01-01", "2024-12-31"] # Subset of timesteps
    broadcast_input_data: False
    extra_math: ["operate"]
#    datetime_format: "%Y-%m-%d %H:%M:%S+00:00"
    mode: base # You can choose either "base", or "operate"

  build:
    ensure_feasibility: false # Switches on/off the "unmet demand" constraint

  solve:
    solver: gurobi
    zero_threshold: 1e-10 # Any value coming out of the backend that is smaller than this (due to floating point errors, probably) will be set to zero
    shadow_prices: ["system_balance"] # Asks the solver to return also the shadow prices for a selected constraint (e.g., "system_balance") as part of the solution. See: https://calliope.readthedocs.io/en/latest/advanced/shadow_prices/

    solver_options: 
        Threads: 6
        Method: 2 # use barrier, but do not run simplex in parallel
        Crossover: 0 # stop after barrier, do not perform crossover
        FeasibilityTol: 1e-3
        OptimalityTol: 1e-4
        BarConvTol: 1e-4

data_definitions:
  objective_cost_weights:
    data: 1
    index: monetary
    dims: costs
  # `bigM` sets the scale of unmet demand, which cannot be too high, otherwise the optimisation will not converge
  bigM: 1e6

data_tables:
  demand:
    data: input_data_tables/demand_year.csv
    rows: timesteps
    columns: [nodes,techs]
    add_dims:
      parameters: sink_use_equals
  renewables:
    data: input_data_tables/renewables_year.csv
    rows: timesteps
    columns: [nodes,techs]
    select:
      techs: [solar_pv,wind_onshore,wind_offshore,hydro]    
    add_dims:
      parameters: source_use_equals  

